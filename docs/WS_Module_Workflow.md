# WS container  > main


## Scenario: when AWS lambda scraped file was available   
    file_downloader.py > main > download_latest_lambda_file() 
    	-> connect to AWS S3 bucket 
    	-> Creates file in: local_lambda_raw_scraped_data/Ogre-raw-data-report-2024-11-17T00-29-25.txt


    data_format_changer.py > main > cloud_data_formater_main()
        <- Reads local_lambda_raw_scraped_data/Ogre-raw-data-report-2024-11-17T00-29-25.txt
        -> Creates pandas_df.csv
        -> Creates copy data/pandas_df_2024-11-17.csv


    df_cleaner.py > df_cleaner_main()
    	- somewhat good module description
        <- Reads file: pandas_df.csv
        -> Creates
    		  - cleaned-sorted-df.csv
    		  - email_body_txt_m4.txt
    		  - email_body_add_date_table.txt


    db_worker.py > db_worker_main()
        -> Reads file: cleaned-sorted-df.csv
        -> connect to DB container


    analytics.py > analytics_main()
    	- bad module doc string  - to many Fixme	
    	<- Reads file: cleaned-sorted-df.csv
    	-> Creates file: basic_price_stats.txt

  
    pdf_creator.py > pdf_creator_main()
    	- bad docstring and code quality
    	<- Reads file: cleaned-sorted-df.csv
    	<- Reads file: basic_price_stats.txt (generated by analitics.py)
        <- Reads file 1_rooms_tmp.txt (generated by data_formater.py:)
		-> Created temp files:
			- 1_rooms.png
			- 2_rooms.png
			- 3_rooms.png
			- 4_rooms.png
			- 1-4_rooms.png
        -> Writes file: Ogre_city_report.pdf
	

    sendgrid_mailer.py > sendgrid_mailer_main()
    	<- Reads files:
    	    - email_body_txt_m4.txt
        	- basic_price_stats.txt
            - email_body_add_dates_table.txt
            - scraped_and_removed.txt
            - Ogre_city_report.pdf

        -> connect to API and send email

    Removes
	data_files = ['email_body_txt_m4.txt',
              'Mailer_report.txt',
              'Ogre-raw-data-report.txt',
              'cleaned-sorted-df.csv',
              'pandas_df.csv',
              'basic_price_stats.txt',
              'email_body_add_dates_table.txt',
              '1_rooms_tmp.txt',
              '1-4_rooms.png',
              '1_rooms.png',
              '2_rooms.png',
              '3_rooms.png',
              '4_rooms.png',
              'test.png',
              'mrv2.txt',
              'Ogre_city_report.pdf']

    -> On success complete -> {"FAST_API: scrape Ogre city apartments task using cloud ws file run completed"
